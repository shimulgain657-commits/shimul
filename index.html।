<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shimul's Advanced Car Adventure</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: none; }
        body { background: #1a1a1a; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; overflow: hidden; color: white; }
        
        /* ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ ‡¶ì ‡¶∞‡¶æ‡¶∏‡ßç‡¶§‡¶æ */
        #gameWorld { position: relative; width: 100vw; height: 100vh; background: #2ecc71; overflow: hidden; }
        #road { position: absolute; width: 400px; height: 5000px; background: #34495e; left: 50%; transform: translateX(-50%); border-left: 8px solid #ecf0f1; border-right: 8px solid #ecf0f1; }
        
        /* ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶ì ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™ */
        #hud { position: fixed; top: 10px; left: 10px; z-index: 100; background: rgba(0,0,0,0.7); padding: 10px; border-radius: 10px; border: 1px solid #f1c40f; }
        #miniMap { position: fixed; top: 10px; right: 10px; width: 80px; height: 80px; background: rgba(255,255,255,0.2); border: 2px solid #fff; border-radius: 5px; z-index: 100; }
        .map-dot { position: absolute; width: 5px; height: 5px; background: red; border-radius: 50%; }

        /* ‡¶ó‡¶æ‡ßú‡¶ø ‡¶ì ‡¶Ö‡¶¨‡¶ú‡ßá‡¶ï‡ßç‡¶ü */
        #player { position: absolute; width: 45px; height: 80px; background: #e74c3c; border-radius: 8px; z-index: 50; border: 3px solid #2c3e50; transition: transform 0.1s; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .enemy { position: absolute; width: 45px; height: 80px; background: #f1c40f; border-radius: 8px; z-index: 40; border: 2px solid #000; }
        .missile { position: absolute; width: 8px; height: 20px; background: #ff5722; border-radius: 4px; z-index: 60; }
        .coin { position: absolute; width: 25px; height: 25px; background: gold; border-radius: 50%; border: 2px solid #b8860b; text-align: center; color: #000; font-weight: bold; font-size: 14px; }
        .fuel { position: absolute; width: 30px; height: 30px; background: #3498db; border-radius: 5px; border: 2px solid #fff; }
        .human { position: absolute; width: 20px; height: 20px; background: #ffdbac; border-radius: 50%; z-index: 45; }
        .zebra-crossing { position: absolute; width: 100%; height: 60px; background: repeating-linear-gradient(90deg, #fff, #fff 40px, transparent 40px, transparent 80px); opacity: 0.5; }

        /* ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ */
        .controls { position: fixed; bottom: 20px; width: 100%; display: flex; justify-content: space-around; padding: 0 20px; z-index: 200; }
        .btn { width: 65px; height: 65px; background: rgba(255,255,255,0.3); border-radius: 50%; border: 2px solid #fff; color: white; font-size: 24px; font-weight: bold; }
        .fire-btn { background: rgba(255,0,0,0.6); width: 80px; height: 80px; }
    </style>
</head>
<body>

    <div id="hud">
        <div>Score: <span id="scoreVal">0</span></div>
        <div>Coins: <span id="coinVal">0</span></div>
        <div>Missiles: <span id="missileVal">5</span></div>
        <div style="width: 100px; height: 10px; background: #555; margin-top: 5px;">
            <div id="fuelBar" style="width: 100%; height: 100%; background: #3498db;"></div>
        </div>
    </div>

    <div id="miniMap"><div id="playerDot" class="map-dot" style="background: lime;"></div></div>

    <div id="gameWorld">
        <div id="road">
            </div>
        <div id="player"></div>
    </div>

    <div class="controls">
        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
            <div id="spacer"></div><button class="btn" onclick="move('up')">‚Üë</button><div></div>
            <button class="btn" onclick="move('left')">‚Üê</button><button class="btn" onclick="move('down')">‚Üì</button><button class="btn" onclick="move('right')">‚Üí</button>
        </div>
        <button class="btn fire-btn" onclick="fireMissile()">üî•</button>
    </div>

    <script>
        const player = document.getElementById('player');
        const road = document.getElementById('road');
        const fuelBar = document.getElementById('fuelBar');
        
        let gameState = {
            posX: 175, posY: 100,
            score: 0, coins: 0, missiles: 5, fuel: 100,
            roadOffset: 0
        };

        // ‡ßß. ‡¶∏‡¶¨‡¶¶‡¶ø‡¶ï‡ßá ‡¶Æ‡ßÅ‡¶≠‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶ì ‡¶è‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶®
        function move(dir) {
            if(gameState.fuel <= 0) return;
            if(dir === 'up') gameState.posY += 20;
            if(dir === 'down') gameState.posY -= 20;
            if(dir === 'left') gameState.posX -= 20;
            if(dir === 'right') gameState.posX += 20;
            
            updatePlayer();
        }

        function updatePlayer() {
            if(gameState.posX < 0) gameState.posX = 0;
            if(gameState.posX > 350) gameState.posX = 350;
            player.style.left = gameState.posX + 'px';
            player.style.bottom = gameState.posY + 'px';
            
            // ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶™‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            document.getElementById('playerDot').style.bottom = (gameState.posY / 50) + 'px';
            document.getElementById('playerDot').style.left = (gameState.posX / 5) + 'px';
        }

        // ‡ß®. ‡¶Æ‡¶ø‡¶∏‡¶æ‡¶á‡¶≤ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ
        function fireMissile() {
            if(gameState.missiles > 0) {
                gameState.missiles--;
                document.getElementById('missileVal').innerText = gameState.missiles;
                let m = document.createElement('div');
                m.className = 'missile';
                m.style.left = (gameState.posX + 20) + 'px';
                m.style.bottom = (gameState.posY + 80) + 'px';
                road.appendChild(m);
                
                let mInt = setInterval(() => {
                    let b = parseInt(m.style.bottom);
                    m.style.bottom = (b + 10) + 'px';
                    if(b > 1000) { clearInterval(mInt); m.remove(); }
                    
                    // ‡¶∂‡¶§‡ßç‡¶∞‡ßÅ ‡¶ó‡¶æ‡ßú‡¶ø‡¶§‡ßá ‡¶≤‡¶æ‡¶ó‡¶≤‡ßá
                    document.querySelectorAll('.enemy').forEach(en => {
                        if(isCollide(m, en)) {
                            en.remove(); m.remove(); clearInterval(mInt);
                            gameState.score += 10;
                            document.getElementById('scoreVal').innerText = gameState.score;
                        }
                    });
                }, 20);
            }
        }

        // ‡ß©. ‡¶™‡¶∞‡¶ø‡¶¨‡ßá‡¶∂ (‡¶ú‡ßá‡¶¨‡ßç‡¶∞‡¶æ ‡¶ï‡ßç‡¶∞‡¶∏‡¶ø‡¶Ç ‡¶ì ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑)
        function spawnEnvironment() {
            // ‡¶ú‡ßá‡¶¨‡ßç‡¶∞‡¶æ ‡¶ï‡ßç‡¶∞‡¶∏‡¶ø‡¶Ç
            let z = document.createElement('div');
            z.className = 'zebra-crossing';
            z.style.top = '-200px';
            road.appendChild(z);
            
            // ‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑
            let h = document.createElement('div');
            h.className = 'human';
            h.style.top = '-190px';
            h.style.left = '0px';
            road.appendChild(h);
            
            let hMove = setInterval(() => {
                let left = parseInt(h.style.left);
                h.style.left = (left + 2) + 'px';
                if(left > 400) h.style.left = '0px';
                
                if(isCollide(player, h)) {
                    alert("‡¶Æ‡¶æ‡¶®‡ßÅ‡¶∑‡ßá‡¶∞ ‡¶ì‡¶™‡¶∞ ‡¶ó‡¶æ‡ßú‡¶ø ‡¶§‡ßÅ‡¶≤‡ßá ‡¶¶‡¶ø‡ßü‡ßá‡¶õ‡ßá‡¶®! ‡¶ó‡ßá‡¶Æ ‡¶ì‡¶≠‡¶æ‡¶∞‡•§");
                    location.reload();
                }
            }, 50);
        }

        // ‡ß™. ‡¶ï‡ßü‡ßá‡¶® ‡¶ì ‡¶§‡ßá‡¶≤ ‡¶ï‡¶æ‡¶≤‡ßá‡¶ï‡ßç‡¶ü
        function spawnItems() {
            let type = Math.random();
            let item = document.createElement('div');
            item.style.left = Math.random() * 350 + 'px';
            item.style.top = '-50px';
            
            if(type > 0.6) {
                item.className = 'coin'; item.innerText = '$';
            } else if(type > 0.3) {
                item.className = 'fuel';
            } else {
                item.className = 'enemy';
            }
            road.appendChild(item);

            let iInt = setInterval(() => {
                let t = parseInt(item.style.top);
                item.style.top = (t + 5) + 'px';
                if(t > 1000) { clearInterval(iInt); item.remove(); }

                if(isCollide(player, item)) {
                    if(item.className === 'coin') { gameState.coins++; document.getElementById('coinVal').innerText = gameState.coins; }
                    if(item.className === 'fuel') { gameState.fuel = 100; fuelBar.style.width = '100%'; }
                    if(item.className === 'enemy') { alert("‡¶ï‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶∂! ‡¶ó‡ßá‡¶Æ ‡¶ì‡¶≠‡¶æ‡¶∞"); location.reload(); }
                    item.remove(); clearInterval(iInt);
                }
            }, 30);
        }

        function isCollide(a, b) {
            let aR = a.getBoundingClientRect();
            let bR = b.getBoundingClientRect();
            return !(aR.bottom < bR.top || aR.top > bR.bottom || aR.right < bR.left || aR.left > bR.right);
        }

        // ‡¶ó‡ßá‡¶Æ ‡¶≤‡ßÅ‡¶™
        setInterval(() => {
            gameState.fuel -= 0.5;
            fuelBar.style.width = gameState.fuel + '%';
            if(gameState.fuel <= 0) { alert("‡¶§‡ßá‡¶≤ ‡¶∂‡ßá‡¶∑!"); location.reload(); }
        }, 1000);

        setInterval(spawnItems, 2000);
        setInterval(spawnEnvironment, 8000);
        updatePlayer();

    </script>
</body>
</html>
